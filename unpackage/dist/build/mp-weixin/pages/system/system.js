(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/system/system"],{"192e":function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;r(n("d63a"));var o=n("98de"),e=n("02b6");function r(t){return t&&t.__esModule?t:{default:t}}var u=function(){n.e("components/uni-form-item/uni-form-item").then(function(){return resolve(n("a76d"))}.bind(null,n)).catch(n.oe)},a=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-uploader/uni-uploader")]).then(function(){return resolve(n("b2f1"))}.bind(null,n)).catch(n.oe)},m={components:{formItem:u,uploader:a},data:function(){return{loading:!1,is_valid:0,form:{id:0,name:"",connect_name:"",connect_phone:"",address:"",status:0,quality_img:[],run_img:[],door_img:[],public_img:[]}}},computed:{},onShow:function(){},onLoad:function(t){void 0!=t.id&&(this.form.id=t.id,this.getModel())},methods:{trigger:function(t){(0,o.trigger)(t)},getModel:function(){var t=this;(0,e.getGroup)({id:this.form.id}).then((function(i){if(i.msg>0)for(var n in t.form)i.data[n]&&("door_img"==n||"public_img"==n||"quality_img"==n||"run_img"==n?t.form[n]=JSON.parse(i.data[n]):"status"!=n&&(t.form[n]=i.data[n]))}))},upchange:function(t,i){"quality_img"==i?this.form.quality_img=t:"run_img"==i?this.form.run_img=t:"door_img"==i?this.form.door_img=t:"public_img"==i&&(this.form.public_img=t)},isMobileNumber:function(t){var i=/^([0-9]{3,4}-)?[0-9]{7,8}$/,n=/^((\+?86)|(\(\+86\)))?(13[012356789][0-9]{8}|15[012356789][0-9]{8}|18[02356789][0-9]{8}|147[0-9]{8}|1349[0-9]{7})$/;return!n.test(t)&&!i.test(t)},judgeStr:function(){return""!=this.form.name&&(""!=this.form.address&&(""!=this.form.connect_name&&(!this.isMobileNumber(this.form.connect_phone)&&(0!=this.form.quality_img.length&&(0!=this.form.run_img.length&&(0!=this.form.door_img.length&&0!=this.form.public_img.length))))))},getPostData:function(){var t=JSON.parse(JSON.stringify(this.form));return t.quality_img=JSON.stringify(this.form.quality_img),t.run_img=JSON.stringify(this.form.run_img),t.door_img=JSON.stringify(this.form.door_img),t.public_img=JSON.stringify(this.form.public_img),t},formSubmit:function(t){this.is_valid=1,this.loading=!0;this.judgeStr()?0==this.form.id?this.addItem():this.updateItem():this.loading=!1},addItem:function(){var i=this;(0,e.openGroup)(this.getPostData()).then((function(n){n.msg>0?t.showModal({title:"提示",content:"添加学校成功,是否进入学校详情页面？",success:function(o){i.loading=!1,o.confirm?t.redirectTo({url:"./detail?id="+n.data}):t.reLaunch({url:"../Home/Home"})}}):(i.loading=!1,t.showToast({title:n.msgbox,icon:"none",duration:2e3}))}))},updateItem:function(){var i=this;(0,e.updateGroup)(this.getPostData()).then((function(n){n.msg>0?t.showModal({title:"提示",content:"修改学校成功,是否进入学校详情页面？",success:function(n){i.loading=!1,n.confirm?t.redirectTo({url:"./detail?id="+i.form.id}):t.reLaunch({url:"../Home/Home"})}}):(i.loading=!1,t.showToast({title:n.msgbox,icon:"none",duration:2e3}))}))}}};i.default=m}).call(this,n("543d")["default"])},"33b3":function(t,i,n){"use strict";(function(t){n("488d"),n("921b");o(n("66fd"));var i=o(n("af4b"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,n("543d")["createPage"])},4608:function(t,i,n){},5453:function(t,i,n){"use strict";var o={"uni-fab":function(){return n.e("components/uni-fab/uni-fab").then(n.bind(null,"a716"))}},e=function(){var t=this,i=t.$createElement,n=(t._self._c,t.isMobileNumber(t.form.connect_phone)),o={img_url:t.form.quality_img},e={img_url:t.form.run_img},r={img_url:t.form.door_img},u={img_url:t.form.public_img},a={color:"#999",selectedColor:"#FEAB01",buttonColor:"#FEAB01"};t.$mp.data=Object.assign({},{$root:{m0:n,a0:o,a1:e,a2:r,a3:u,a4:a}})},r=[];n.d(i,"b",(function(){return e})),n.d(i,"c",(function(){return r})),n.d(i,"a",(function(){return o}))},"82db":function(t,i,n){"use strict";var o=n("4608"),e=n.n(o);e.a},af4b:function(t,i,n){"use strict";n.r(i);var o=n("5453"),e=n("e8ce");for(var r in e)"default"!==r&&function(t){n.d(i,t,(function(){return e[t]}))}(r);n("82db");var u,a=n("f0c5"),m=Object(a["a"])(e["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);i["default"]=m.exports},e8ce:function(t,i,n){"use strict";n.r(i);var o=n("192e"),e=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(i,t,(function(){return o[t]}))}(r);i["default"]=e.a}},[["33b3","common/runtime","common/vendor"]]]);